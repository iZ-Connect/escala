<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Escala de Servi√ßo - HGeSM</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: radial-gradient(circle at top, #0b1a2d, #020617);
      color: #fff;
    }

    h1 {
      text-align: center;
      margin: 25px 0 10px;
    }

    select {
      display: block;
      margin: 0 auto 20px;
      padding: 8px 14px;
      font-size: 14px;
      border-radius: 6px;
      background: #0f172a;
      color: #fff;
      border: 1px solid #334155;
    }

    table {
      width: 90%;
      margin: auto;
      border-collapse: collapse;
      background: #020617;
      border-radius: 10px;
      overflow: hidden;
    }

    thead {
      background: #1e293b;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #1e293b;
    }

    th {
      color: #93c5fd;
      font-size: 13px;
    }

    /* üî¥ Finais de semana E feriados */
    tr.fim-de-semana {
      background: linear-gradient(90deg, #5b0f0f, #7a1a1a);
    }

    /* üü° HOJE */
    tr.hoje {
      background: linear-gradient(90deg, #facc15, #fde047);
      color: #000;
      font-weight: bold;
      box-shadow: 0 0 15px rgba(250, 204, 21, 0.7);
    }

    tr.hoje td.militar::before {
      content: "‚ò¢Ô∏è ";
    }
  </style>
</head>
<body>

<h1>‚ò¢Ô∏è Escala - HGeSM</h1>

<select id="mesSelect">
  <option value="JANEIRO">JANEIRO</option>
  <option value="FEVEREIRO">FEVEREIRO</option>
  <option value="MAR√áO">MAR√áO</option>
</select>

<table>
  <thead>
    <tr>
      <th>DATA</th>
      <th>DIA</th>
      <th>MILITAR</th>
      <th>SUBSTITU√çDO</th>
    </tr>
  </thead>
  <tbody id="tabela"></tbody>
</table>

<script>
const url = "10WpBBvicIuFjLiYyouYn-FKTAAm33qNDEqAPavznLNY";

const diasSemana = ["DOM", "SEG", "TER", "QUA", "QUI", "SEX", "S√ÅB"];
const hoje = new Date();
const hojeStr = String(hoje.getDate()).padStart(2, '0') + '/' + String(hoje.getMonth() + 1).padStart(2, '0');

async function carregarEscala(mes) {
  const res = await fetch(url + "?mes=" + mes);
  const dados = await res.json();
  const tbody = document.getElementById("tabela");
  tbody.innerHTML = "";

  dados.forEach(linha => {
    const data = linha[0];
    const dia = linha[1];
    const feriado = linha[2]; // üëà COLUNA F
    const militar = linha[3] || "-";
    const substituto = linha[4] || "-";

    const tr = document.createElement("tr");

    const isFimDeSemana = dia === "S√ÅB" || dia === "DOM";
    const isFeriado = feriado === true || feriado === "TRUE" || feriado === "‚úî" || feriado === "SIM";

    if (isFimDeSemana || isFeriado) {
      tr.classList.add("fim-de-semana");
    }

    if (data === hojeStr && militar !== "-") {
      tr.classList.remove("fim-de-semana"); // HOJE tem prioridade visual
      tr.classList.add("hoje");
    }

    tr.innerHTML = `
      <td>${data}</td>
      <td>${dia}</td>
      <td class="militar">${militar}</td>
      <td>${substituto}</td>
    `;

    tbody.appendChild(tr);
  });
}

document.getElementById("mesSelect").addEventListener("change", e => {
  carregarEscala(e.target.value);
});

carregarEscala("JANEIRO");
</script>

</body>
</html>
